<msg id='msg'></msg>
<bar bind:search='searchPro' bind:scan='scanPro' id='bar'></bar>
<view class='quickOrder'>
  <view class='pageTab' id='tab'>
    <!-- <block wx:if='{{isQuickBill}}'>
      <view class="tabItem {{isSelect==index?'curr':''}}" wx:for='{{tabArr}}' bindtap='tabSelect' data-tIdx='{{index}}'>{{item}}</view>
    </block>
    <block wx:else>
      <view class="tabItem {{isSelect==index?'curr':''}}" wx:for='{{tabArr}}' bindtap='tabSelect' data-tIdx='{{index}}'>{{item}}</view>
      <view class='tabItem bg screen' bindtap='showScreen' data-status='open'>筛选</view>
    </block> -->
		<view class="tabItem {{isSelect==index?'curr':''}}" wx:for='{{tabArr}}' bindtap='tabSelect' data-tIdx='{{index}}'>{{item}}</view>
  </view>
  <block wx:if='{{hasProduct == true}}'>
    <scroll-view class='product-content ' id='content' style="height: {{contentHeight}}" bindscrolltolower='moreProduct' lower-threshold='5' enable-back-to-top='true' scroll-with-animation='true' scroll-y='{{canScroll}}'>
      <view class='product-item' wx:for='{{productArr}}'>
        <block wx:if='{{item.addSaleTagName}}'>
          <view class='item up'>
            <text class='saleTag'>{{item.addSaleTagName}}</text>
            <text class='sale-content'>{{item.saleTag}}</text>
          </view>
        </block>

        <view class='item down'>
          <view class='img-content'>
            <image class='product-img' src='{{item.photo.smallUrl}}' mode='aspectFit' />
          </view>
          <view class='product-msg'>
            <text class='product-caption' catchtap='toDetail' data-productId='{{item.shopProductId}}'>{{item.productCaption}}</text>
            <block wx:if='{{item.productMsg.stockTag.amount>0&&item.productMsg.stockTag.amount<=100}}'>
              <text>库存：{{item.productMsg.stockTag.amount}}</text>
            </block>
            <block wx:else>
              <text>库存：{{item.productMsg.stockTag.stockState}}</text>
            </block>
            <view class='price-area'>
              <text class='product-price'>¥{{item.productMsg.price}} /{{item.productMsg.packUnits}}</text>
              <block wx:if='{{item.productMsg.price <= 0}}'>
                <text>商品尚未定价</text>
              </block>
            </view>
          </view>
        </view>
        <block wx:if='{{item.productMsg.hasStock  && item.productMsg.price > 0}}'>
          <view class='buy-action'>
            <view class='shopcart' bindtap='addToShopcart' data-skuId='{{item.productMsg.skuId}}' data-index='{{index}}' data-productId='{{item.orgProductId}}'></view>
            <view class='action-box'>
              <text class='reduce' bindtap='changeAmount' data-status='reduce' data-index='{{index}}'>-</text>
              <input type='number' bindinput='amountSave' data-index='{{index}}' value='{{item.shopcartAmount}}' />
              <text class='add' bindtap='changeAmount' data-status='add' data-index='{{index}}'>+</text>
            </view>
          </view>
        </block>
      </view>
    </scroll-view>
  </block>
  <block wx:elif='{{hasProduct == false}}'>
    <view class='noProduct_tip' style='height: {{tipHeight}}'>
      <image src='/images/tip_rabbit.png' class='tip_img' mode='aspectFit'></image>
      <view class='tip_up'>抱歉，没找到相关的商品信息</view>
      <view class='tip_down'>建议您查看输入是否有误或者调整关键字</view>
    </view>
  </block>
</view>